<div class="background">
  <app-nav-bar></app-nav-bar>
    <div class="card">

        <h2><b>Select Option</b></h2>
        <input type="radio" id="option1" name="GL" value="GL" [(ngModel)]="selectedOption">
        <label for="option1">GL</label>
        <input type="radio" id="option2" name="Deposit" value="Deposit" [(ngModel)]="selectedOption">
        <label for="option1">Deposit</label>
        <input type="radio" id="option3" name="Loan" value="Loan" [(ngModel)]="selectedOption">
        <label for="option1">Loan</label>
        <input type="radio" id="option4" name="All" value="All" [(ngModel)]="selectedOption">
        <label for="option1">All</label>
        <button class="btn" (click)="transTable()">View/Edit Transaction</button>

    </div>




      <div class="table-wrapper"  *ngIf="showTable">
        <input type="varchar"  [(ngModel)]="searchNumber" (input)="filterData()"  placeholder="Enter a number to search">
       <table class="fl-table" >
          <thead>
            <tr>
              <th>Select</th>
              <th>por_orgacode</th>
              <th>ptr_trancode</th>
              <th>pet_eventcode</th>
              <th>ptr_trandesc</th>
              <th>System Generated</th>
              <th>Generate Script</th>
              <th>Update Transaction</th>
              <th>Delete Trans_type</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of filteredData">
              <td>
                <input
                  type="checkbox" [(ngModel)]="item.selected"
                  name="selected{{ item }}"  />
              </td>
              <td>{{ item.por_orgacode }}
                <ng-container *ngIf="item.editing">
                  <input type="varchar" [(ngModel)]="item.por_orgacode" maxlength="10">
                </ng-container>
              </td>
              <td>{{ item.ptr_trancode }}
                <ng-container *ngIf="item.editing">
                  <input type="varchar" [(ngModel)]="item.ptr_trancode" maxlength="3">
                </ng-container>
              </td>
              <td>{{ item.pet_eventcode }}
                <ng-container *ngIf="item.editing">
                  <input type="int" [(ngModel)]="item.pet_eventcode" >
                </ng-container>
              </td>
              <td>{{ item.ptr_trandesc }}
                <ng-container *ngIf="item.editing;  ">
                  <input type="varchar" [(ngModel)]="item.ptr_trandesc" maxlength="40">
                </ng-container>
              </td>
              <td>{{ item.systemgen }}
                <ng-container *ngIf="item.editing; ">
                  <input type="tinyint" [(ngModel)]="item.systemgen" >
                </ng-container>

              </td>
              <td><button [disabled]="!item.selected">Generate</button></td>
              <td>
                <button *ngIf="!item.editing" [disabled]="!item.selected" (click)="toggleEditing(item)">Edit</button>
                <button *ngIf="item.editing" [disabled]="!item.selected" (click)="toggleEditing(item); updateTrans()">Update</button>
              </td>
              <td><button [disabled]="!item.selected" (click)="delTrans(item.id)"> Delete</button></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="container" *ngIf="showTable" >
        <form (ngSubmit)="submitForm(myForm)" #myForm="ngForm">
          <div *ngFor="let row of transData; let i is: index" >
            <div class="form-row">
              <div class="input-data">
                <input type="varchar" name="por_orgacode{{i}}" [(ngModel)]="row.por_orgacode" required maxlength="10" />
                <div class="underline"></div>
                <label for="por_orgacode{{ i }}">por_orgacode:</label>
              </div>
              <div class="input-data">
                <input type="varchar" name="ptr_trancode{{i}}" [(ngModel)]="row.ptr_trancode" required maxlength="3" />
                <div class="underline"></div>
                <label for="ptr_trancode{{ i }}">ptr_trancode:</label>
              </div>
            </div>
            <div class="form-row">
              <div class="input-data">
                <input type="int"  name="pet_eventcode{{i}}" [(ngModel)]="row.pet_eventcode" required />
                <div class="underline"></div>
                <label for="pet_eventcode{{i}}">pet_eventcode</label>
              </div>
              <div class="input-data">
                <input  type="varchar" name="ptr_trandesc{{i}}" [(ngModel)]="row.ptr_trandesc"  required  maxlength="40"/>
                <div class="underline"></div>
                <label for="ptr_trandesc{{i}}">ptr_trandesc</label>
              </div>
            </div>
            <div class="form-row">
              <div class="input-data">
                <input type="tinyint" name="systemgen{{i}}" [(ngModel)]="row.systemgen" required maxlength="1" />
                <div class="underline"></div>
                <label for="systemgen{{i}}">systemgen</label>
              </div>
            </div>
            <div class="form-row submit-btn">
              <div class="input-data">
                 <div class="inner"></div>
                 <input type="submit" value="submit" [disabled]="myForm.invalid">
              </div>
            </div>
          </div>
        </form>
      </div>

</div>

