<div class="background">
  <app-nav-bar></app-nav-bar>
    <div class="card">

        <h2><b>Select Option</b></h2>
        <input type="radio" id="option1" name="GL" value="GL" [(ngModel)]="selectedOption">
        <label for="option1">GL</label>
        <input type="radio" id="option2" name="Deposit" value="Deposit" [(ngModel)]="selectedOption">
        <label for="option1">Deposit</label>
        <input type="radio" id="option3" name="Loan" value="Loan" [(ngModel)]="selectedOption">
        <label for="option1">Loan</label>
        <input type="radio" id="option4" name="All" value="All" [(ngModel)]="selectedOption">
        <label for="option1">All</label>

        <button class="btn" (click)="chargesTable()">View/Edit Charges</button>
    </div>




  <div class="table-wrapper" *ngIf="showTable" >
        <input
        type="varchar"
        [(ngModel)]="searchNumber"
        (input)="filterData()"
        placeholder="Enter a chrgcode to search"
      />
    <table class="fl-table">
          <thead>
            <tr>
              <th>Select</th>
              <th>pch_chrgcode</th>
              <th>por_orgacode</th>
              <th>pch_chrgdesc</th>
              <th>pch_chrgshort</th>
              <th>pel_elmtcode</th>
              <th>ptr_trancode</th>
              <th>pch_chrgprofit</th>
              <th>soc_charges</th>
              <th>Generate Script</th>
              <th>Update Charge</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of filteredData; let i = index">
              <td>
                <input
                  type="checkbox"
                  name="selected{{ item }}"
                  [(ngModel)]="item.selected"
                />
              </td>

              <td>{{ item.pch_chrgcode }} </td>


              <td>{{item.por_orgacode}} </td>



              <td>{{ item.pch_chrgdesc }} </td>



              <td>{{ item.pch_chrgshort }} </td>



              <td>{{ item.pel_elmtcode }}  </td>



              <td>{{ item.ptr_trancode }}  </td>


              <td>{{item.pch_chrgprofit }} </td>



              <td>{{ item.soc_charges }} </td>


              <td>
                <a href="{{ item.downloadLink }}"
                  ><button [disabled]="!item.selected">Generate</button></a
                >
              </td>
              <td>
                <button
                  *ngIf="!item.editing"
                  [disabled]="!item.selected"
                  (click)="toggleEditing(item)"
                >
                  Edit
                </button>
                <button
                  *ngIf="item.editing"
                  [disabled]="!item.selected"
                  (click)="toggleEditing(item); updateCharge(item.id,item.editedValue)"
                >
                  Update
                </button>
              </td>

              <td><button [disabled]="!item.selected" (click)="delCharge(item.id)">Delete</button></td>
            </tr>
          </tbody>
        </table>
      </div>


      <div class="container" *ngIf="showTable">
        <div class="text">
          Add Record
        </div>
        <form (ngSubmit)="submitForm(myForm)" #myForm="ngForm">
          <div *ngFor="let row of chargeData; let i is: index">
            <div class="form-row">
              <div class="input-data">
                <input type="varchar" name="pch_chrgcode{{ i }}" [(ngModel)]="row.pch_chrgcode" required
                maxlength="3" />
                <div class="underline"></div>
                <label for="pch_chrgcode{{ i }}">pch_chrgcode:</label>
              </div>
              <div class="input-data">
                <input type="varchar" name="por_orgacode{{ i }}" [(ngModel)]="row.por_orgacode" required maxlength="10" />
                <div class="underline"></div>
                <label for="por_orgacode{{ i }}">por_orgacode:</label>
              </div>
            </div>
            <div class="form-row">
                <div class="input-data">
                  <input  type="varchar" name="pch_chrgdesc{{ i }}" [(ngModel)]="row.pch_chrgdesc" required maxlength="40" />
                  <div class="underline"></div>
                  <label for="pch_chrgdesc{{ i }}">pch_chrgdesc:</label>
                </div>
                <div class="input-data">
                  <input type="varchar"  name="pch_chrgshort{{ i }}" [(ngModel)]="row.pch_chrgshort"  required maxlength="20"  />
                  <div class="underline"></div>
                  <label for="pch_chrgshort{{ i }}">pch_chrgshort:</label>
                </div>
            </div>
            <div class="form-row">
                <div class="input-data">
                  <input  type="varchar" name="pel_elmtcode{{ i }}" [(ngModel)]="row.pel_elmtcode" required  maxlength="10" />
                  <div class="underline"></div>
                  <label for="pel_elmtcode{{ i }}">pel_elmtcode:</label>
                </div>
                <div class="input-data">
                  <input type="varchar" name="ptr_trancode{{ i }}"  [(ngModel)]="row.ptr_trancode"  required  maxlength="3"/>
                  <div class="underline"></div>
                  <label for="ptr_trancode{{ i }}">ptr_trancode:</label>
                </div>
            </div>
            <div class="form-row">
              <div class="input-data">
                <input type="tinyint" name="pch_chrgprofit{{ i }}" [(ngModel)]="row.pch_chrgprofit" required maxlength="1" />
                <div class="underline"></div>
                <label for="pch_chrgprofit{{ i }}">pch_chrgprofit:</label>
              </div>
              <div class="input-data">
                <input type="tinyint" name="soc_charges{{ i }}"  [(ngModel)]="row.soc_charges" required maxlength="1" />
                <div class="underline"></div>
                <label for="soc_charges{{ i }}">soc_charges:</label>
              </div>
          </div>
          <div class="form-row">
              <div  class="input-data">
                <input type="url" name="generate{{i}}" [(ngModel)]="row.generate" required >
                <div class="underline"></div>
                <label for="generate{{ i }}">generate:</label>
              </div>
          </div>
          <div class="form-row submit-btn">
            <div class="input-data">
               <div class="inner"></div>
               <input type="submit" value="submit" [disabled]="myForm.invalid">
            </div>
          </div>
      </div>
    </form>
</div>


